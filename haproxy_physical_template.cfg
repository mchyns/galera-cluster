global
    log /dev/log local0
    log /dev/log local1 notice
    maxconn 4096
    user haproxy
    group haproxy
    daemon

defaults
    log     global
    mode    tcp
    option  tcplog
    option  dontlognull
    retries 3
    timeout connect 5000ms
    timeout client  50000ms
    timeout server  50000ms

# HAProxy Statistics Page
# Access via: http://<haproxy-ip>:8404/stats
listen stats
    bind *:8404
    mode http
    stats enable
    stats uri /stats
    stats refresh 10s
    stats admin if TRUE
    stats auth admin:admin123

# MySQL/MariaDB Load Balancer (Round Robin)
# Listens on port 3306 (or change to 3300 if preferred)
listen mysql-cluster
    bind *:3306
    mode tcp
    balance roundrobin
    option mysql-check user haproxy_check
    
    # ============================================
    # REPLACE THESE IPs WITH YOUR PHYSICAL LAPTOPS
    # ============================================
    # Example for 3 physical machines:
    # - Laptop 1: 192.168.1.10
    # - Laptop 2: 192.168.1.11
    # - Laptop 3: 192.168.1.12
    
    server node1 192.168.1.10:3306 check weight 1
    server node2 192.168.1.11:3306 check weight 1
    server node3 192.168.1.12:3306 check weight 1
    
    # Notes:
    # - Replace the IP addresses above with your actual laptop IPs
    # - Make sure MariaDB is listening on 0.0.0.0:3306 on each laptop
    # - Create user 'haproxy_check'@'%' on each MariaDB node for health checks:
    #   
    #   On each MariaDB node, run:
    #   CREATE USER 'haproxy_check'@'%';
    #   FLUSH PRIVILEGES;
